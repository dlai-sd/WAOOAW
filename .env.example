# WAOOAW Configuration Template
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_DB=0

# ============================================
# Message Bus Configuration
# ============================================
MESSAGE_BUS_PRIORITY_STREAMS=5
MESSAGE_BUS_MAX_RETRIES=3
MESSAGE_BUS_DLQ_STREAM=messages:dlq
MESSAGE_BUS_RETENTION_DAYS=730  # 2 years
MESSAGE_BUS_CONSUMER_READ_COUNT=10
MESSAGE_BUS_CONSUMER_BLOCK_MS=5000

# ============================================
# PostgreSQL Configuration
# ============================================
POSTGRES_URL=postgresql://waooaw_user:changeme@localhost:5432/waooaw
POSTGRES_MAX_CONNECTIONS=20
AUDIT_TRAIL_ENABLED=true
AUDIT_BATCH_SIZE=100
AUDIT_FLUSH_INTERVAL_SECONDS=60

# ============================================
# Security Configuration
# ============================================
MESSAGE_BUS_SIGNATURE_REQUIRED=true
MESSAGE_BUS_SIGNATURE_ALGO=hmac-sha256

# JWT Authentication (CRITICAL: Must be the same across ALL services)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# This secret is used by CP, PP, Plant Backend, and Plant Gateway
# ALL services must use the EXACT SAME value for token validation to work
JWT_SECRET=dev-secret-change-in-production-REPLACE-ME
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Cloudflare Turnstile (CP signup CAPTCHA)
# Set TURNSTILE_SITE_KEY on CP frontend and TURNSTILE_SECRET_KEY on CP backend.
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# CP registration-to-Plant shared secret
CP_REGISTRATION_KEY=

# Agent Secret Keys (generate with: python -c "import secrets; print(secrets.token_hex(32))")
# Each agent needs a unique secret key for message signing
AGENT_SECRET_KEY_WOW_VISION_PRIME=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_CONTENT=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_SEO=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_SOCIAL=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_EMAIL=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_ADS=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_WOW_BRAND=GENERATE_ME_64_CHAR_HEX
AGENT_SECRET_KEY_COORDINATOR=GENERATE_ME_64_CHAR_HEX

# ============================================
# Observability Configuration
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json  # json or text
ENABLE_OPENTELEMETRY=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# ============================================
# Application Configuration
# ============================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true
AGENT_CONFIG_PATH=waooaw/config/agent_config.yaml
MESSAGE_BUS_CONFIG_PATH=waooaw/config/message_bus_config.yaml

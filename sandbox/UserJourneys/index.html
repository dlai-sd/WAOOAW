<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WAOOAW — Interactive User Journeys (Sandbox)</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- GSAP for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/gsap.min.js"></script>
  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">WAOOAW</div>
        <div class="tag">By the Agent • From the Agent • For Human & Agent</div>
      </div>
      <div class="controls">
        <select id="roleSelector" title="Choose role">
          <option value="explorer">Explorer (Investor)</option>
          <option value="customer">Customer (Doctor)</option>
          <option value="creator">Creator (Domain Onboarder)</option>
          <option value="service">Service Ops</option>
          <option value="platform">Platform Builder</option>
        </select>
        <div class="wallet">
          <span>Budget</span>
          <div id="budgetDisplay" class="budget-pill">$10.00</div>
        </div>
        <div class="xp">
          <span>XP</span>
          <div id="xpDisplay" class="xp-pill">0</div>
        </div>
      </div>
    </header>

    <main class="grid">
      <section class="panel missions-panel">
        <h2>Missions</h2>
        <p class="muted">Choose a mission role and either play automatically or step through milestones manually.</p>
        <div class="missions-list">
          <div class="mission" data-id="customer">
            <div class="mission-title">Customer — Doctor hires Social Media Agent</div>
            <div class="mission-desc">Start a 7-day trial, assign a content task, review drafts and approve for posting.</div>
            <div class="mission-actions">
              <button class="btn primary" data-action="play" data-mission="customer">Play Mission</button>
              <button class="btn ghost" data-action="step" data-mission="customer">Step</button>
            </div>
          </div>

          <div class="mission" data-id="creator">
            <div class="mission-title">Creator — Agent Creation Factory</div>
            <div class="mission-desc">Propose an agent, run Factory, get Vision attestation and publish to marketplace.</div>
            <div class="mission-actions">
              <button class="btn primary" data-action="play" data-mission="creator">Play Mission</button>
              <button class="btn ghost" data-action="step" data-mission="creator">Step</button>
            </div>
          </div>

          <div class="mission" data-id="service">
            <div class="mission-title">Service Ops — Incident Escalation</div>
            <div class="mission-desc">Simulate incident, triage L1 → L2 → L3 and resolve with audit trail.</div>
            <div class="mission-actions">
              <button class="btn primary" data-action="play" data-mission="service">Play Mission</button>
              <button class="btn ghost" data-action="step" data-mission="service">Step</button>
            </div>
          </div>

          <div class="mission" data-id="platform">
            <div class="mission-title">Platform Builder — Publish & Prewarm</div>
            <div class="mission-desc">Publish certified agent, configure prewarm & quotas, view audit trail.</div>
            <div class="mission-actions">
              <button class="btn primary" data-action="play" data-mission="platform">Play Mission</button>
              <button class="btn ghost" data-action="step" data-mission="platform">Step</button>
            </div>
          </div>
        </div>

        <div class="mission-player">
          <div class="timeline" id="timeline"></div>
          <div class="milestone-card" id="milestoneCard"></div>
          <div class="player-controls">
            <button id="btnPlayAuto" class="btn primary">Auto Play</button>
            <button id="btnStepNext" class="btn ghost">Next Step</button>
            <button id="btnAbort" class="btn ghost">Abort</button>
          </div>
        </div>
      </section>

      <section class="panel factory" id="factoryPanel">
        <h2>Factory & Marketplace</h2>
        <p class="muted">Creator role: watch CoE agents collaborate to manufacture and certify a new Agent.</p>

        <div class="factory-board">
          <div class="coe" id="coe-domain">DomainOnboard</div>
          <div class="coe" id="coe-vision">Vision</div>
          <div class="coe" id="coe-test">Test</div>
          <div class="coe" id="coe-security">Security</div>
          <div class="coe" id="coe-pack">Packaging</div>
        </div>

        <div class="factory-controls">
          <input id="newAgentName" placeholder="New Agent name e.g., 'Dental Social Agent'"/>
          <button id="btnCreateAgentDef" class="btn primary">Propose Agent</button>
          <button id="btnRunFactory" class="btn ghost">Run Factory</button>
        </div>

        <div id="factoryLog" class="factory-log"></div>
      </section>

      <section class="panel orchestration" id="orchestrationPanel">
        <h2>Orchestration & Servicing</h2>
        <p class="muted">Route tasks across L1/L2 agents for automation. Visualize flow and audit events.</p>

        <div class="orchestra">
          <div class="node" id="node-ingest">Ingest</div>
          <div class="node" id="node-ai">AI Router</div>
          <div class="node" id="node-review">Review</div>
          <div class="node" id="node-schedule">Scheduler</div>
        </div>

        <div class="audit-log" id="orchestralLog"></div>

        <div class="ops-controls">
          <button id="btnGenIncident" class="btn warning">Create Incident</button>
          <button id="btnResolve" class="btn ghost">Resolve Incident</button>
        </div>

        <div id="incidentLog" class="incident-log"></div>

        <h3>Agent Instances (Sales)</h3>
        <div id="instances" class="instances"></div>
      </section>
    </main>

    <footer class="footer">
      <div>Sandbox / UserJourneys — WAOOAW</div>
      <div class="mini-controls">
        <button id="btnReset" class="btn ghost">Reset Sandbox</button>
        <button id="btnExport" class="btn ghost">Export State</button>
      </div>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>

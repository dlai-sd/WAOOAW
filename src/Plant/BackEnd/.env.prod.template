# WAOOAW Plant - Production Environment
# Environment: prod (GCP Cloud Run)
# Database: Cloud SQL PostgreSQL (prod instance with HA)
# Purpose: Live production workloads, customer-facing

# Application
APP_NAME="WAOOAW Plant Phase API"
APP_VERSION="0.1.0"
ENVIRONMENT="production"
DEBUG=false
LOG_LEVEL="WARNING"

# Database - Cloud SQL (prod instance with HA + read replicas)
DATABASE_URL="postgresql://plant_prod:${DB_PASSWORD}@/plant_prod?host=/cloudsql/${GCP_PROJECT_ID}:${GCP_REGION}:plant-prod"
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false
DATABASE_READ_REPLICA_URL="postgresql://plant_prod_readonly:${DB_PASSWORD}@/plant_prod?host=/cloudsql/${GCP_PROJECT_ID}:${GCP_REGION}:plant-prod-replica"

# Redis - Cloud Memorystore (standard tier with persistence)
REDIS_URL="redis://${REDIS_HOST}:6379/0"
REDIS_TTL_SECONDS=86400  # 24 hours

# ML Service - Cloud Run (ml-inference-prod)
ML_SERVICE_URL="https://ml-inference-prod-${CLOUD_RUN_HASH}-uc.a.run.app"
ML_SERVICE_TIMEOUT_MS=100
ML_EMBEDDING_DIMENSION=384
ML_MODEL="MiniLM-384"

# Security - Secret Manager (production keys)
SECRET_KEY="${SECRET_KEY_PROD}"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Cryptography - Secret Manager (rotated quarterly)
RSA_KEY_SIZE=4096
HASH_ALGORITHM="SHA256"
RSA_PRIVATE_KEY_PATH="projects/${GCP_PROJECT_ID}/secrets/plant-rsa-private-prod/versions/latest"
RSA_PUBLIC_KEY_PATH="projects/${GCP_PROJECT_ID}/secrets/plant-rsa-public-prod/versions/latest"

# Performance SLAs - Strict enforcement
VALIDATE_SELF_SLA_MS=10
EVOLVE_SLA_MS=5
VERIFY_AMENDMENT_SLA_MS=20
PGVECTOR_SEARCH_SLA_MS=500
SCHEMA_MIGRATION_SLA_LATENCY_INCREASE_PERCENT=5  # Stricter for prod

# Cost Governance - Enabled with alerts
EMBEDDING_QUALITY_STABILITY_THRESHOLD=0.85
EMBEDDING_QUALITY_CHECK_SCHEDULE="02:00"
COST_ALERT_THRESHOLD_MONTHLY=100  # $100 budget
COST_ALERT_EMAIL="governor@waooaw.dev"

# API
API_V1_PREFIX="/api/v1"
CORS_ORIGINS=["https://waooaw.dev","https://plant.waooaw.dev","https://www.waooaw.dev"]

# Google Cloud
GCP_PROJECT_ID="${GCP_PROJECT_ID}"
GCP_REGION="us-central1"
CLOUD_SQL_CONNECTION_NAME="${GCP_PROJECT_ID}:us-central1:plant-prod"

# Monitoring - Full production observability
ENABLE_PROMETHEUS=true
ENABLE_CLOUD_LOGGING=true
ENABLE_CLOUD_TRACE=true
ENABLE_CLOUD_PROFILER=true
ENABLE_ERROR_REPORTING=true

# Backup & DR
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"  # Daily at 3 AM UTC
BACKUP_RETENTION_DAYS=30
POINT_IN_TIME_RECOVERY=true

# Rate Limiting - Production protection
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_BURST=100

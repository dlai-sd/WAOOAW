# WAOOAW Plant - UAT Environment
# Environment: uat (GCP Cloud Run)
# Database: Cloud SQL PostgreSQL (uat instance)
# Purpose: Pre-production testing, QA validation, performance benchmarks

# Application
APP_NAME="WAOOAW Plant Phase API (UAT)"
APP_VERSION="0.1.0"
ENVIRONMENT="uat"
DEBUG=false
LOG_LEVEL="info"

# Database - Cloud SQL (uat instance)
DATABASE_URL="postgresql://plant_uat:${DB_PASSWORD}@/plant_uat?host=/cloudsql/${GCP_PROJECT_ID}:${GCP_REGION}:plant-uat"
DATABASE_POOL_SIZE=15
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false

# Redis - Cloud Memorystore (standard tier)
REDIS_URL="redis://${REDIS_HOST}:6379/0"
REDIS_TTL_SECONDS=86400  # 24 hours

# ML Service - Cloud Run (ml-inference-uat)
ML_SERVICE_URL="https://ml-inference-uat-${CLOUD_RUN_HASH}-uc.a.run.app"
ML_SERVICE_TIMEOUT_MS=100
ML_EMBEDDING_DIMENSION=384
ML_MODEL="MiniLM-384"

# Security - Secret Manager
SECRET_KEY="${SECRET_KEY_UAT}"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Cryptography - Secret Manager
RSA_KEY_SIZE=4096
HASH_ALGORITHM="SHA256"
RSA_PRIVATE_KEY_PATH="projects/${GCP_PROJECT_ID}/secrets/plant-rsa-private-uat/versions/latest"
RSA_PUBLIC_KEY_PATH="projects/${GCP_PROJECT_ID}/secrets/plant-rsa-public-uat/versions/latest"

# Performance SLAs - Strict (production-like)
VALIDATE_SELF_SLA_MS=10
EVOLVE_SLA_MS=5
VERIFY_AMENDMENT_SLA_MS=20
PGVECTOR_SEARCH_SLA_MS=500
SCHEMA_MIGRATION_SLA_LATENCY_INCREASE_PERCENT=10

# Cost Governance - Enabled
EMBEDDING_QUALITY_STABILITY_THRESHOLD=0.85
EMBEDDING_QUALITY_CHECK_SCHEDULE="02:00"

# API
API_V1_PREFIX="/api/v1"
CORS_ORIGINS=["https://uat.waooaw.dev","https://plant-uat.waooaw.dev"]

# Google Cloud
GCP_PROJECT_ID="${GCP_PROJECT_ID}"
GCP_REGION="us-central1"
CLOUD_SQL_CONNECTION_NAME="${GCP_PROJECT_ID}:us-central1:plant-uat"

# Monitoring - Full observability
ENABLE_PROMETHEUS=true
ENABLE_CLOUD_LOGGING=true
ENABLE_CLOUD_TRACE=true
ENABLE_CLOUD_PROFILER=true

# Testing - Performance benchmarks enabled
ENABLE_PERFORMANCE_BENCHMARKS=true
BENCHMARK_REPORT_BUCKET="gs://${GCP_PROJECT_ID}-plant-benchmarks"

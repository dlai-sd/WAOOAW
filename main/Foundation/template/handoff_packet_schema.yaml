# Handoff Packet Schema (HDP) â€” aligned to HDP-1.0
#
# Purpose: Provide a structured, machine- and human-readable packet for
# transferring context for support-only work.
#
# Notes:
# - This file defines the schema/shape expected for the HDP template.
# - Keep keys and ordering consistent with HDP-1.0 so downstream tooling
#   remains stable.
#
# Versioning
hdp_version: "1.0"

# Header: meta information about the packet and operating constraints.
header:
  packet_id: ""                # string (required)
  created_at: ""               # string (ISO-8601 UTC) (required)
  updated_at: ""               # string (ISO-8601 UTC) (optional)
  owner: ""                    # string/org/user (required)
  repo: ""                     # string (required)
  base_branch: "main"           # string (optional)
  source_ref: ""               # string (optional) e.g. branch/sha
  requester: ""                # string (optional)
  operating_mode: ""           # string (required) e.g. normal, trial_support_only
  trial_period:
    start_at: ""               # string (ISO-8601 UTC) (optional)
    end_at: ""                 # string (ISO-8601 UTC) (optional)
    notes: ""                  # string (optional)

# Case: what support is needed.
case:
  title: ""                    # string (required)
  summary: ""                  # string (required)
  severity: ""                 # string (optional) e.g. low/med/high
  category: ""                 # string (optional)
  desired_outcomes: []          # list[string] (optional)
  acceptance_criteria: []       # list[string] (optional)

# Environment: where the issue occurs.
environment:
  product: ""                  # string (optional)
  service: ""                  # string (optional)
  runtime: ""                  # string (optional)
  os: ""                       # string (optional)
  region: ""                   # string (optional)
  versions: {}                  # map[string]string (optional)

# Reproduction: steps and expected/actual.
reproduction:
  steps: []                     # list[string] (optional)
  expected: ""                 # string (optional)
  actual: ""                   # string (optional)

# Evidence: logs, screenshots, references.
evidence:
  links: []                     # list[string] (optional)
  attachments: []               # list[string] (optional) (paths/ids)
  snippets: []                  # list[map] (optional)

# Analysis: known hypotheses, root cause notes.
analysis:
  hypotheses: []                # list[string] (optional)
  findings: []                  # list[string] (optional)
  root_cause: ""               # string (optional)

# Actions: what has been tried and what is next.
actions:
  attempted: []                 # list[string] (optional)
  recommended: []               # list[string] (optional)
  owner_actions: []             # list[string] (optional) tasks for requester

# Routing: who/where to hand off.
routing:
  queue: ""                    # string (optional)
  assignee: ""                 # string (optional)
  escalation_path: []           # list[string] (optional)

# Status: tracking.
status:
  state: ""                    # string (optional) e.g. new/in_progress/blocked/done
  last_update: ""              # string (ISO-8601 UTC) (optional)
  next_check_in: ""            # string (ISO-8601 UTC) (optional)
  notes: ""                    # string (optional)

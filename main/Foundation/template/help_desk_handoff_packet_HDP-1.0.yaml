# Help Desk Handoff Packet Schema (HDP-1.0)
# Renamed from: hdp-1.0_handoff_packet_schema.yml
#
# Key updates (2026-01-06):
# - Added help desk containment mode: trial_support_only (prohibits all job-related work, incl. internal drafts)
# - Updated L3 update policy triggers: state_change plus 2-hour time cadence

schema_version: "HDP-1.0"

help_desk:
  containment_mode:
    type: string
    enum:
      - standard
      - contained
      - trial_support_only
    description: >-
      Level of containment for the help desk workflow.
      trial_support_only prohibits all job-related work including internal drafts.

policy_overrides:
  l3_update_policy:
    triggers:
      type: array
      items:
        type: string
      default:
        - state_change
        - time_cadence
    time_cadence:
      interval:
        type: string
        default: "2h"
      description: "Periodic refresh cadence for L3 updates."

handoff_packet:
  type: object
  required:
    - ticket_id
    - requester
    - summary
    - containment_mode
  properties:
    ticket_id:
      type: string
    requester:
      type: object
      required: [name, email]
      properties:
        name: { type: string }
        email: { type: string }
    summary:
      type: string
    containment_mode:
      type: string
      enum: [standard, contained, trial_support_only]
    context:
      type: object
      additionalProperties: true

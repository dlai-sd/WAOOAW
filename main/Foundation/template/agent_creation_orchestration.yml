component: "agent_creation_orchestration"
component_version: "1.0"

framework_compliance:
  implements: "orchestration_framework.yml"
  note: "This orchestration follows the 13-component framework pattern"

cross_references:
  - orchestration_framework.yml
  - governance_protocols.yaml
  - genesis_foundational_governance_agent.md
  - systems_architect_foundational_governance_agent.md
  - vision_guardian_foundational_governance_agent.md

constitution_compliance:
  operating_modes_supported: ["normal"]
  trial_support_only_rules:
    note: "Agent creation is platform governance work, not supported in trial_support_only mode."

iteration_1:
  goal: "Define Agent Factory pipeline from spec to live agent."
  
  pipeline_stages:
    stage_1_specification:
      input: "agent_creation_request"
      required_fields:
        - agent_name
        - purpose
        - scope_boundaries
        - required_capabilities
        - data_access_requirements
        - external_systems_to_integrate
      output: "agent_specification_draft"
    
    stage_2_me_wow_authoring:
      input: "agent_specification_draft"
      output: "minimum_executable_way_of_working"
      description: "Author 10-section ME-WoW document"
      reference: "See component_genesis_certification_gate.yml section 2 for completeness requirements"
    
    stage_3_genesis_certification:
      input: "minimum_executable_way_of_working"
      evaluator: "genesis_foundational_governance_agent"
      description: "Genesis certifies agent blueprint"
      component: "component_genesis_certification_gate.yml"
      component_sections: ["certification checks", "certification decision artifact"]
      outputs:
        - pass: "agent_blueprint_certified"
        - fail: "certification_refusal_with_gaps"
        - reclassify: "escalate_to_governor"
    
    stage_4_architecture_review:
      input: "agent_blueprint_certified"
      evaluator: "systems_architect_foundational_governance_agent"
      description: "Systems Architect validates architecture"
      component: "component_architecture_review_pattern.yml"
      component_sections: ["architecture checks", "dependency analysis", "rollback architecture"]
      outputs:
        - pass: "architecture_approved"
        - fail: "architecture_revision_required"
    
    stage_5_ethics_review:
      input: "architecture_approved"
      evaluator: "vision_guardian_foundational_governance_agent"
      description: "Vision Guardian validates constitutional alignment"
      component: "component_ethics_review_pattern.yml"
      component_sections: ["constitutional alignment checks", "success-pressure doctrine", "customer trust validation", "emergency protocols"]
      outputs:
        - pass: "ethics_cleared"
        - fail: "ethics_concern_escalate_to_governor"
        - escalate: "requires_constitutional_amendment"
    
    stage_6_deployment_approval:
      input: "ethics_cleared"
      approver: "platform_governor"
      description: "Governor approves deployment"
      component: "component_governor_approval_workflow.yml"
      component_sections: ["execution approval process", "timeout policies", "precedent seed emission"]
      outputs:
        - approved: "ready_for_deployment"
        - denied: "deployment_blocked"
    
    stage_7_deployment:
      input: "ready_for_deployment"
      description: "Deploy agent, manage failure scenarios"
      component_rollback: "component_rollback_procedure.yml"
      component_health: "component_health_check_protocol.yml"
      component_versioning: "component_versioning_scheme.yml"
      component_audit: "component_audit_logging_requirements.yml"
      outputs:
        - success: "agent_live"
        - failure: "deployment_failed_rollback (see component_rollback_procedure.yml)"

iteration_2:
  goal: "Reference reusable components for quality gates, rollback, versioning"
  
  quality_gates:
    reference: "See component_genesis_certification_gate.yml for certification gate details"
    gate_after_stage_2: "ME-WoW completeness < 100% blocks progression"
    gate_after_stage_3: "Genesis certification failure returns to stage 2"
    gate_after_stage_4: "Architecture failure escalates to Systems Architect"
    gate_after_stage_5: "Ethics failure escalates to Governor"
    gate_after_stage_7: "Health check failure triggers rollback"
  
  rollback_procedures:
    reference: "See component_rollback_procedure.yml for complete rollback logic"
    deployment_failure: "Automatic rollback via deployment_failure_rollback procedure"
    post_deployment_incident: "Automatic or manual rollback via active_agent_incident_rollback procedure"
  
  agent_versioning:
    reference: "See component_versioning_scheme.yml for complete versioning logic"
    initial_version: "All new agents deployed as major.0.0 (e.g., 1.0.0)"
    version_triggers: "Major version for scope changes; minor/patch per component_versioning_scheme.yml"
    version_approval: "Genesis assigns versions per component_versioning_scheme.yml approval requirements"

integrations:
  orchestration_framework:
    reference: "Implements 13-component orchestration pattern (entry, stages, gates, approval, state machine, escalation, exit, rollback, business rules, observability, UI, versioning, instance lifecycle)"
  governance_protocols:
    reference: "Uses Governor approval workflow and escalation protocol"
  foundation_constitution_engine:
    reference: "Enforces trial_support_only restrictions and Evidence_collection_scope"
  communication_collaboration_policy:
    reference: "Genesis, Systems Architect, Vision Guardian communicate using patterns defined in communication_collaboration_policy.yml"
    pattern: "orchestrated (framework coordinates stages, agents execute)"
  message_bus_framework:
    reference: "Stage assignments sent as commands via message_bus. Stage completion events published via message_bus."
    governance_enforcement: "dispatcher validates sender (stage orchestrator) authorized to command receiver (stage executor)"

component: "agent_servicing_orchestration"
component_version: "1.0"

framework_compliance:
  implements: "orchestration_framework.yml"
  note: "This orchestration follows the 13-component framework pattern"

cross_references:
  - orchestration_framework.yml
  - agent_creation_orchestration.yml
  - governance_protocols.yaml
  - genesis_foundational_governance_agent.md

constitution_compliance:
  operating_modes_supported: ["normal"]
  trial_support_only_rules:
    note: "Agent servicing is platform governance work, not supported in trial_support_only mode."

iteration_1:
  goal: "Define Proposal vs Evolution classification and servicing pipeline."
  
  intake:
    servicing_request_types:
      - bug_report
      - feature_request
      - skill_uplift
      - performance_optimization
      - integration_update
    
    required_fields:
      - agent_id
      - request_type
      - description
      - severity
      - impact_assessment
      - requestor
  
  classification:
    component: "component_genesis_certification_gate.yml"
    component_section: "evolution_classification_criteria"
    evaluator: "genesis_foundational_governance_agent"
    
    proposal_definition:
      reference: "See component_genesis_certification_gate.yml section 'proposal_definition' for criteria"
      approval_path: "genesis_acknowledgment"
      timeline: "fast_track"
    
    evolution_definition:
      reference: "See component_genesis_certification_gate.yml section 'evolution_definition' for criteria"
      approval_path: "full_recertification_pipeline"
      timeline: "standard_pipeline"
    
    classification_output:
      - proposal: "route_to_proposal_track"
      - evolution: "route_to_evolution_track"
      - uncertain: "escalate_to_governor"

iteration_2:
  goal: "Define Proposal and Evolution servicing tracks."
  
  proposal_track:
    stage_1_development:
      input: "servicing_request_classified_as_proposal"
      actions:
        - implement_fix_or_enhancement
        - update_documentation
        - write_tests
      output: "proposal_implementation"
    
    stage_2_genesis_review:
      input: "proposal_implementation"
      component: "component_genesis_certification_gate.yml"
      evaluator: "genesis_foundational_governance_agent"
      checks:
        - confirm_no_scope_expansion
        - confirm_no_approval_reduction
        - confirm_no_new_data_access
      outputs:
        - approved: "proposal_approved"
        - reclassified_as_evolution: "route_to_evolution_track"
    
    stage_3_deployment:
      input: "proposal_approved"
      component_approval: "component_governor_approval_workflow.yml"
      component_versioning: "component_versioning_scheme.yml"
      component_health: "component_health_check_protocol.yml"
      approval_type: "execution_approval_required"
      approver: "platform_governor_or_deputy"
      actions:
        - deploy_to_staging
        - run_integration_tests
        - deploy_to_production
        - monitor_health_post_deployment
      outputs:
        - success: "proposal_deployed"
        - failure: "rollback_via_component_rollback_procedure"
  
  evolution_track:
    stage_1_specification_update:
      input: "servicing_request_classified_as_evolution"
      actions:
        - update_agent_specification
        - update_me_wow
        - document_evolution_rationale
      output: "evolution_specification"
    
    stage_2_full_pipeline:
      input: "evolution_specification"
      process: "reference_agent_creation_orchestration stages 3-7"
      note: "Evolution requires full certification pipeline"
      components:
        - component_genesis_certification_gate.yml (stage 3)
        - component_architecture_review_pattern.yml (stage 4)
        - component_ethics_review_pattern.yml (stage 5)
        - component_governor_approval_workflow.yml (stage 6)
        - component_rollback_procedure.yml (stage 7)
    
    stage_3_version_increment:
      input: "evolution_deployed"
      component: "component_versioning_scheme.yml"
      action: "increment_major_version_per_versioning_scheme"
      precedent_seed: "emit_evolution_precedent_seed"
  
  rollback_on_failure:
    component: "component_rollback_procedure.yml"
    trigger_conditions:
      - deployment_health_check_fail
      - post_deployment_incident
      - governor_override
    
    rollback_actions:
      reference: "See component_rollback_procedure.yml for complete rollback procedures"
      summary:
        - suspend_new_version
        - reactivate_previous_version
        - preserve_logs_and_evidence
        - genesis_reviews_what_went_wrong
        - governor_decides_retry_or_abandon

runtime_controls:
  idempotency:
    idempotency_key_required_for:
      - proposal_track.stage_3_deployment
      - evolution_track.stage_2_full_pipeline approvals
    collision_behavior: "return cached approval/deployment result"
  timeouts_minutes:
    classification: 60
    proposal_track: 180
    evolution_track: 480
  retries:
    policy: "3 attempts with backoff 1m, 2m, 5m"
    non_retryable: ["classification_confirms_evolution", "ethics_denial"]
  circuit_breakers:
    trigger: ">50% of servicing runs failing in 10-run window"
    action: "pause servicing, notify governor"
  policy_pep:
    reference: "policy_runtime_enforcement.yml"
    enforcement_points:
      - "classification requests"
      - "deployment approval requests"
    attestation_required: true
  slo_reference: "resilience_runtime_expectations.yml"

integrations:
  agent_creation_orchestration:
    reference: "Evolution track reuses creation pipeline stages 3-7 (Genesis certification through deployment)"
  governance_protocols:
    reference: "Uses Genesis review protocol and Governor approval workflow"
  orchestration_framework:
    reference: "Implements orchestration pattern with Proposal vs Evolution branching logic"
  communication_collaboration_policy:
    reference: "Genesis classifies change as Proposal or Evolution using request_response pattern defined in communication_collaboration_policy.yml"
  message_bus_framework:
    reference: "Classification request sent via message_bus to Genesis. Genesis response triggers Proposal or Evolution branching."
